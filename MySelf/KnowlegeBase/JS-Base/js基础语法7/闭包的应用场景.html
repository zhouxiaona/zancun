<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>闭包的应用场景</title>
		<style type="text/css">
			div{
				width: 100px;
				height: 100px;
				border: 1px solid black;
				text-align: center;
				line-height: 100px;
				float: left;
				margin: 10px;
			}
		</style>
	</head>
	<body>
		<div>0</div>
		<div>1</div>
		<div>2</div>
		<div>3</div>
		<div>4</div>
		<div>5</div>
		<div>6</div>
		<div>7</div>
		<div>8</div>
		<div>9</div>
	</body>
	<script type="text/javascript">
		var divs=document.getElementsByTagName('div');

		for(let i =0;i<divs.length;i++){
			divs[i].onclick = function(){
				console.log(i)
			}
		}
		// for(var i = 0; i < divs.length; i++){
		// 	divs[i].index = i;
		// 	divs[i].onclick = function(){
		// 		var _this = this;
		// 		setTimeout(function(){
		// 			console.log(_this.index);
		// 		},1000);
		// 	}
		// }

		// for(var i = 0; i < divs.length; i++){
		// 	divs[i].index = i;
		// 	(function(){
		// 		var _this = divs[i];
		// 		divs[i].onclick = function(){
		// 			setTimeout(function(){
		// 				console.log(_this.index);
		// 			},1000);
		// 		}
		// 	})();
		// }

// 函数t里面的点击方法会形成闭包。随着for循环运行10次，函数t也会运行10次。每次t运行的时候，都会有一个变量a。然后每一个闭包保存了函数t运行时候的变量a。
//--------利用闭包保存局部变量---------

		//匿名函数的自执行 
		// for(var i=0;i<divs.length;i++){
		// 	(function(){
		// 		var a = i;
		// 		divs[i].onclick = function(){
		// 			setTimeout(function(){
		// 				console.log(a);
		// 			},1000);
		// 		}
		// 	})();
		// }

//---------------利用闭包保存参数-----------------------
		// for(var i=0;i<divs.length;i++){
		// 	(function(a){
		// 		divs[i].onclick=function(){
		// 			setTimeout(function(){
		// 				console.log(a);
		// 			},1000);
		// 		}
		// 	})(i);
		// }


		// for(var i=0;i<divs.length;i++){
		// 	(function(i){
		// 		divs[i].onclick=function(){
		// 			setTimeout(function(){
		// 				console.log(i);
		// 			},1000);
		// 		}
		// 	})(i);
		// }








//----------------------test--------------------------------------------------------
		// for(var i=0;i<divs.length;i++){
		// 	// divs[i].index=i;
		// 	console.log(i);
		// 	divs[i].onclick=function(){
		// 		// var _this=this;
		// 		console.log(this);
		// 	}
		// }
		
		// 点击小方块变色（关灯游戏前身）
		// var lastDiv=divs[0];
		// for(var i=0;i<divs.length;i++){
		// 	divs[i].index=i;
		// 	divs[i].onclick=function(){
		// 		console.log(this.index);
		// 		lastDiv.style.backgroundColor='red';
		// 		this.style.backgroundColor='blue';
		// 		lastDiv=this;
		// 	}
		// }
//---------------------------------------------------------------------	----------	
		// for(var i=0;i<divs.length;i++){
		// 	divs[i].index=i;
		// 	divs[i].onclick=function(){
		// 		var _this=this;
		// 		setTimeout(function(){
		// 			console.log(_this.index);
		// 		},500);
		// 	}
		// }
//----------------------------------------------------------------------------
		// for(var i=0;i<divs.length;i++){
		// 	divs[i].index=i;
		// 	(function(){
		// 		var _this=divs[i];
		// 		divs[i].onclick=function(){
		// 			setTimeout(function(){
		// 				console.log(_this.index);
		// 			},1000);
		// 		}
		// 	})();
		// }




	</script>
</html>











