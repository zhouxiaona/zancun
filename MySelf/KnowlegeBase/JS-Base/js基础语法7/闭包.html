<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>闭包</title>
	</head>
	<body>
		
	</body>
	<script type="text/javascript">
		// 闭包
		// 内存　硬盘
		// 变量的作用域，局部变量，是在函数内部声明，局部变量不可以在函数外部使用，本质原因：
		// 函数在被调用的时候会入栈，并且分配空间，函数内部的变量，都是在这块空间内部声明的，当函数执行完毕之后就会出栈，系统回收空间，函数内部的变量所占空间也会被回收，所以不能再函数外面使用函数内部定义的变量。
		
		//内存泄露
		
		// 函数内部的函数可以形成闭包。
		// 闭包里面使用局部变量和函数参数的时候，用得就是外部函数的局部变量
		// 弊端：
		// 闭包会导致函数运行结束之后局部变量的空间不会被释放从而造成内存泄露（执行的次数越多，占用的内存越多）
		
		// 同一个函数调用两次，会返回两个函数f1,f2.f1和f2
		// function fn(){
		// 	var a = 10;
		// 	return function(){
		// 		console.log(++a);
		// 	}
		// }
		// var f1 = fn();
		// var f2 = fn();
		// f1();
		// f1();
		// f1();
		// f1();
		// f1();
		// f2();
							
		//此时a只生成一次，属于in1和in2的全局变量，所以in1执行完毕后，a的值变为15
		function fn(){
			var a = 10;
			function in1(){
				console.log(++a);
			}
			function in2(){　　
				console.log(++a);
			}
			return [in1, in2];
		}
		var arr = fn();
		var f1 = arr[0];
		var f2 = arr[1];
		f1();
		f1();
		f1();
		f1();
		f1();
		f2();
		    
	</script>
</html>