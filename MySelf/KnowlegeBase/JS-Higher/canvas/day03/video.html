<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>canvas视频</title>
		<style>
			canvas{
				border:1px solid black;
			}
		</style>
	</head>
	<body>
		<video id="myvideo" style="display: none;" src="HTML5的前世今生.mp4" controls="controls">
			
		</video>
		<canvas id="mycanvas" width="670" height="380">
			您的浏览器不支持canvas，请及时更新浏览器!
		</canvas>
		<button onclick="start()">开始</button>
		<button onclick="pause()">暂停</button>
	</body>
	
	<script type="text/javascript">
		var mycanvas=document.getElementById("mycanvas");
		var ctx=mycanvas.getContext("2d");
		var video=document.getElementById("myvideo");
		
		function act(){
			console.log("lala");
			ctx.beginPath();
			ctx.drawImage(video,0,0);
			//获取像素点
//			var imageData=ctx.getImageData(0,0,mycanvas.width,mycanvas.height);
//			for(var i=0;i<imageData.data.length;i+=4){
//				imageData.data[i+1]=0;
//				imageData.data[i+2]=0;
//			}
//			ctx.putImageData(imageData,0,0);
			res=window.requestAnimationFrame(act);
		}
		act();
		
		function start(){
			cancelAnimationFrame(res);
			video.play();
			act();
		}
		function pause(){
			video.pause();
			//停止动画循环
			cancelAnimationFrame(res);
		}
		
		
		
	</script>
</html>
