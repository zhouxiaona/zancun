<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    let deepClone = function (obj) { return JSON.parse(JSON.stringify(obj)) }
    let a = {
        name: 'Ken',
        age: 18,
        hobbit: ['dance', 'sing', { type: 'sports', value: 'run' }],
        schoolData: {
            grades: 'A',
        },
        run: function () { },
        walk: undefined,
        fly: NaN,
        cy: null,
    }
    let b = deepClone(a)
    console.log("a", a)
    console.log("b", b)

    const obj = { name: 'cc', age: 24, arr: [1, 2, 3, [33, 44]], };
    const newObj = Object.assign({}, obj);
    obj.name = 'cc1';
    obj.arr[0] = 100;
    // console.log(newObj.name, '--newObj.name--')
    // console.log(obj.name, '--obj.name--')
    console.log(newObj.arr, '--newObj.arr--')
    console.log(obj.arr, '--obj.arr--')



    // 数据类型判断
    function getType(attr) {
        let type = Object.prototype.toString.call(attr);
        let newType = type.substr(8, type.length - 9);
        return newType;
    }

    // 转换函数
    function StringIfy(obj) {
        // 如果是非object类型 or null的类型直接返回 原值的String
        if (typeof obj !== "object" || getType(obj) === null) {
            return String(obj);
        }
        // 声明一个数组
        let json = [];
        // 判断当前传入参数是对象还是数组
        let arr = obj ? getType(obj) === "Array" : false;
        // 循环对象属性
        for (let key in obj) {
            // 判断属性是否在对象本身上
            if (obj.hasOwnProperty(key)) {
                // 获取属性并且判断属性值类型
                let item = obj[key];
                // 如果为object类型递归调用
                if (getType(obj) === "Object") {
                    // consoarrle.log(item)
                    item = StringIfy(item);
                }
                // 拼接数组字段
                json.push((arr ? '"' : '"' + key + '": "') + String(item) + '"');
            }
        }
        console.log(arr, String(json));
        // 转换数组字段为字符串
        return (arr ? "[" : "{") + String(json) + (arr ? "]" : "}");
    }

    // 测试代码
    StringIfy({ name: { name: "abc" } }); // "{"name": "{"name": "abc"}"}"
    StringIfy([1, 2, 4]); // "["1","2","4"]"






</script>

</html>